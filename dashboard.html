<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>GD-DASHBOARD - Web Components Playground</title>
    <script type="module" src="https://qa.latest.stg11.panther.intgdc.com/components/9da1d4933a94432db09b0d7ed74ac2f1.js?auth=sso"></script>
</head>
<body>
    <menu>
        <a href="./index.html">gd-insight</a>
        <a href="./dashboard.html">gd-dashboard</a>
        <a href="./local.html">http://localhost:3000</a>
        <a href="./euce1.html">euce1</a>
    </menu>
    <section>
        <h2>Configure</h2>
        <p>Useful to test live updates to the dashboard properties.</p>
        <p><label>
            Select dashboard
            <select id="dashboard-selector">
                <option selected value="24f994a1-055b-4973-a51e-536194e669d6">1</option>
                <option value="0bfe8f0c-1b3e-44fb-8e3d-f4f6ab6e2dbd">2</option>
                <option value="f4f53f89-8d6f-4d85-95ca-48f132fd012e">3</option>
                <option value="0479ca71-42ed-496e-ab86-ab688e67afeb">4</option>
                <option value="c5a773d6-6f39-4fc6-9f75-2dcc10981f99">5</option>
                <option value="422fd0d8-3da3-4a3a-8a05-eaaceb8b0488">6</option>
                <option value="5af3d098-6ba7-4023-b913-4f018c4afca8">7</option>
                <option value="f9ebf15c-50f3-4e1e-9e80-673bedaf86d0">8</option>
            </select>
        </label></p>
        <p><label>
            Select locale
            <select id="locale">
                <option selected value="en-US">en-US</option>
                <option value="ja-JP">ja-JP</option>
            </select>
        </label></p>
        <p><label>
            <input type="checkbox" id="readonly"/>&nbsp;Readonly
        </label></p>
    </section>
    <section>
        <h2>Result</h2>
        <gd-dashboard
                id="dashboard"
                dashboard="6df65174-13b1-4097-8c25-38143190b610"
        ></gd-dashboard>
    </section>
    <section>
        <h2>Event log</h2>
        <div id="log" style="height:20em;overflow-y:auto;border:1px dotted gray;"></div>
    </section>
    <script type="module">
        const dashboard = document.getElementById("dashboard");
        const dashboardSelector = document.getElementById("dashboard-selector");
        const localeSelector = document.getElementById("locale");
        const eventLog = document.getElementById("log");
        const readonlyToggle = document.getElementById("readonly");

        dashboardSelector.addEventListener("change", e => {
            dashboard.setAttribute("dashboard", e.target.value);
        });
        localeSelector.addEventListener("change", e => {
            dashboard.setAttribute("locale", e.target.value);
        });
        readonlyToggle.addEventListener("change", e => {
            if (e.checked)
                dashboard.setAttribute("readonly", "");
            else
                dashboard.removeAttribute("readonly");
        });

        // Log events
        [
            "GDC.DASH/EVT.INITIALIZED", "GDC.DASH/EVT.DEINITIALIZED", "GDC.DASH/EVT.SAVED",
            "GDC.DASH/EVT.COPY_SAVED", "GDC.DASH/EVT.SHARING.CHANGED", "GDC.DASH/EVT.FILTER_CONTEXT.CHANGED",
            "GDC.DASH/EVT.FILTER_CONTEXT.DATE_FILTER.SELECTION_CHANGED",
            "GDC.DASH/EVT.FILTER_CONTEXT.ATTRIBUTE_FILTER.SELECTION_CHANGED",
        ].map(eventType => {
            dashboard.addEventListener(eventType, e => {
                const div = document.createElement("pre");
                div.style.height = "1em";
                // div.style.whiteSpace = "nowrap";
                div.style.overflow = "hidden";
                div.style.borderBottom = "1px dashed gray";
                div.innerText = `${eventType.padEnd(20)}: ${JSON.stringify(e.detail)}`;
                eventLog.appendChild(div);

                console.log(eventType, e.detail);
            });
        });
    </script>
</body>
</html>
